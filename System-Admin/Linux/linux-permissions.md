# Linux 系統管理：檔案權限與 ACL (Permissions)

- **適用**：全端工程師、MIS
- **目標**：理解 Linux `rwx` 權限計算、`chmod` 用法及特殊權限符號。

## 1. 權限身分 (Who)
Linux 將存取者分為三類，依序設定：
1. **User (u)**：檔案擁有者。
2. **Group (g)**：所屬群組成員。
3. **Others (o)**：其他人 (路人/訪客)。

## 2. 權限計算公式 (4-2-1 法則)

| 代號 | 動作 | 分數 | 對檔案的意義 | 對資料夾的意義 |
| :--- | :--- | :--- | :--- | :--- |
| **r** | Read | **4** | 讀取內容 | 列出檔案清單 (`ls`) |
| **w** | Write | **2** | 修改/刪除內容 | 新增/刪除/搬移內部的檔案 |
| **x** | eXecute | **1** | 執行程式/腳本 | **進入目錄 (`cd`)** |

> **計算範例**：
> `rwx` = 4+2+1 = **7**
> `r-x` = 4+0+1 = **5**
> `rw-` = 4+2+0 = **6**

## 3. 常用設定與 Chmod 指令
指令：`chmod [User][Group][Others] filename`

- **`700`**：只有我能進去/讀寫 (SSH 資料夾、隱私目錄)。
- **`600`**：只有我能讀寫檔案 (私鑰、設定檔)。
- **`755`**：我全權管理，其他人只能看與執行 (網站目錄、公開工具)。
- **`644`**：我讀寫，其他人唯讀 (網頁檔案、一般文件)。

> ⚠️ **資安警告**：嚴禁使用 `777` (全開)，這允許任何人植入並執行惡意程式。

## 4. 特殊符號解密
當執行 `ls -al` 時，權限字串尾端 (`drwxr-xr-x+`) 可能出現的符號：

- **`+` (ACL)**：Access Control List。
  - 代表有額外指定的權限 (例如特別開放給某個 User)。
  - 檢視指令：`getfacl` (Linux) 或 `ls -le` (Mac)。
- **`@` (Extended Attributes)**：擴充屬性。
  - macOS 常見，用於標記下載來源 (隔離) 或 Finder 標籤。
  - 檢視指令：`xattr -l`。
- **`.` (SELinux context)**：安全上下文。
  - 常見於 CentOS/RedHat 企業版，若標籤不符，權限全開也無法存取。
  - 檢視指令：`ls -Z`。